[gd_scene load_steps=4 format=3 uid="uid://downtown_scene"]

[ext_resource type="Script" path="res://scripts/managers/game_manager.gd" id="1"]
[ext_resource type="Script" path="res://scripts/triggers/mission_trigger.gd" id="2"]
[ext_resource type="Script" path="res://scripts/triggers/race_trigger.gd" id="3"]

[sub_resource type="BoxShape3D" id="BoxShape3D_ground"]
size = Vector3(500, 1, 500)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ground"]
albedo_color = Color(0.3, 0.3, 0.3, 1)

[node name="Downtown" type="Node3D"]

[node name="Environment" type="Node3D" parent="."]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Environment"]
transform = Transform3D(1, 0, 0, 0, 0.707107, 0.707107, 0, -0.707107, 0.707107, 0, 10, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="Environment"]

[node name="Ground" type="StaticBody3D" parent="." groups=["ground"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Ground"]
shape = SubResource("BoxShape3D_ground")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Ground"]
mesh = BoxMesh.new()
surface_material_override/0 = SubResource("StandardMaterial3D_ground")
transform = Transform3D(500, 0, 0, 0, 1, 0, 0, 0, 500, 0, 0, 0)

[node name="TestRoad1" type="StaticBody3D" parent="." groups=["road"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.1, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="TestRoad1"]
shape = SubResource("BoxShape3D_road1")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TestRoad1"]
mesh = BoxMesh.new()
transform = Transform3D(100, 0, 0, 0, 0.1, 0, 0, 0, 10, 0, 0, 0)

[sub_resource type="BoxShape3D" id="BoxShape3D_road1"]
size = Vector3(100, 0.1, 10)

[node name="RaceTriggers" type="Node3D" parent="."]

[node name="IntroRaceTrigger" type="Area3D" parent="RaceTriggers" groups=["race_trigger"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -50, 1, 0)
script = ExtResource("3")
race_id = "intro_race_01"
race_name = "First Blood"
race_type = "Sprint"
minimum_reputation = 0
entry_fee = 0
race_scene_path = "res://scenes/races/intro_race.tscn"
race_description = "Your first street race in the city. Prove yourself!"
prize_money = 500
reputation_reward = 100
total_laps = 3
ai_count = 3

[node name="CollisionShape3D" type="CollisionShape3D" parent="RaceTriggers/IntroRaceTrigger"]
shape = SubResource("BoxShape3D_race_trigger")

[node name="MeshInstance3D" type="MeshInstance3D" parent="RaceTriggers/IntroRaceTrigger"]
mesh = BoxMesh.new()
transform = Transform3D(5, 0, 0, 0, 2, 0, 0, 0, 5, 0, 0, 0)
transparency = 0.5

[sub_resource type="BoxShape3D" id="BoxShape3D_race_trigger"]
size = Vector3(5, 2, 5)

[node name="MissionTriggers" type="Node3D" parent="."]

[node name="MayaTrigger" type="Area3D" parent="MissionTriggers" groups=["mission_trigger"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 100, 1, 50)
script = ExtResource("2")
mission_id = "meet_maya"
character_name = "Maya"
auto_trigger = false
show_indicator = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="MissionTriggers/MayaTrigger"]
shape = SubResource("BoxShape3D_mission_trigger")

[sub_resource type="BoxShape3D" id="BoxShape3D_mission_trigger"]
size = Vector3(3, 2, 3)

[node name="NPCMarkers" type="Node3D" parent="."]

[node name="Maya" type="Marker3D" parent="NPCMarkers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 100, 0, 50)

[node name="Diesel" type="Marker3D" parent="NPCMarkers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -200, 0, 150)

[node name="PlayerSpawn" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.866025, 0.5, 0, -0.5, 0.866025, 0, 15, 25)
current = true
